@model TikTokCalendar.DAL.ModelDataWrapper
@{
    EventUserStatHandler EUSH = new EventUserStatHandler();
    TikTokCalendar.DAL.Cookies cookie = new TikTokCalendar.DAL.Cookies();
}
<div style="display:none"> <!-- this is strange but needed -->
    <script>
        $(function () {
            $('.activator.usersgoing').BAToolTip({
                tipOpacity: 0.9,
                tipOffset: 20
            });
        })
    </script>
</div>

@if (EUSH.UserAttending(EUSH_global.ID_ATM, cookie.LoadStringFromCookie("UserName")))
{
<strong>Innsjekket &#10004;</strong>
}
else if (EUSH.UserGoing(EUSH_global.ID_ATM))
{
    <strong>Du skal.</strong>
}

<!-- hover box displaying users -->
<div class="tip-item">
    <span class="activator usersgoing">[@EUSH.HowManyUsersGoing(EUSH_global.ID_ATM) skal]</span>
    <div class="tip usersgoing">
        @foreach (var eus in Model.eventUserStats)
        {
            if (eus.EventID == EUSH_global.ID_ATM)
            {
                <span class="no-linebreak">
                    @if (EUSH.UserAttending(EUSH_global.ID_ATM, eus.UserName))
                    {
                        <text>&#10004;</text>
                    }
                    @eus.UserName<br />
                </span>
            }
        }
    </div>
</div>